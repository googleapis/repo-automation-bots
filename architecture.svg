<?xml version="1.0"?>
<!-- Generated by SVGo -->
<svg width="1480" height="820"
     viewBox="0 0 740 410"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<style type="text/css">
<![CDATA[
@import url('https://fonts.googleapis.com/css?family=Roboto');
]]>
</style>
<marker id="path-arrow-start" refX="7" refY="3" markerWidth="7" markerHeight="6" orient='auto' >
<path d="M0,3 L7,0 V6 Z" style="fill:rgb(58, 125, 240);" />
</marker>
<marker id="path-arrow-end" refX="0" refY="3" markerWidth="7" markerHeight="6" orient='auto' >
<path d="M0,0 V6 L7,3 Z" style="fill:rgb(58, 125, 240);" />
</marker>
<filter id="drop-shadow" >
<feGaussianBlur in="SourceAlpha" result="baseShadow"  stdDeviation="0.7 0.7" />
<feOffset in="baseShadow" result="offsetBlur"  dx="0" dy="1" />
<feFlood in="baseShadow" result="shadowColor"  flood-fill-color="" flood-fill-opacity="0" flood-color='rgba(0,0,0,0.3)' />
<feComposite in="offsetBlur" in2="shadowColor" result="dropShadow"  operator="in" k1="0" k2="0" k3="0" k4="0" />
<feMerge>
<feMergeNode in="dropShadow"/>
<feMergeNode in="SourceGraphic"/>
</feMerge>
</filter>
</defs>
<desc># Generated by go/gcpdraw&#xA;meta {&#xA;  title &#34;Repo Automation Bots Infrastructure&#34;&#xA;}&#xA;&#xA;elements {&#xA;  card server {&#xA;  &#x9;name &#34;GitHub&#34;&#xA;  &#x9;description &#34;Repository WebHooks&#34;&#xA;  }&#xA;&#xA;  gcp {  &#xA;  group webhooks {&#xA;   name &#34;GitHub Webhook Infrastructure&#34;&#xA;   card gcf {&#xA;     &#x9;name &#34;bot1&#34;&#xA;        description &#34;The GitHub Bot. Handles both Webhooks and Cron events&#34; &#xA;    }&#xA;    card tasks {&#xA;    &#x9;name &#34;bot1-queue&#34;&#xA;        description &#34;Queue per-bot. Allows for retries and inspection.&#34;&#xA;    }&#xA;  }&#xA;  group common {&#xA;  &#x9;name &#34;Common Resources&#34;&#xA;  &#x9;card secret_manager {&#xA;        name &#34;bot1&#34;&#xA;        description &#34;Each bot has a secret with it&#39;s GitHub Private Key&#34;&#xA;    }&#xA;  }&#xA;  group cron {&#xA;&#x9;name &#34;Cron-Based Infrastructure&#34;&#xA;  &#x9;&#xA;    card run {&#xA;    &#x9;name &#34;serverless_scheduler_proxy&#34;&#xA;        description &#34;Invokes the given GCF signing the payload via secret in SecretManager.&#34;&#xA;    }&#xA;    card scheduler {&#xA;    &#x9;name &#34;bot1-cron&#34; &#xA;        description &#34;Optional for each bot. Invokes bots on a fixed schedule.&#34;&#xA;    }&#xA;  }   &#xA;    &#xA;  }&#xA;}&#xA;&#xA;paths {&#xA;&#x9;webhooks (-down-&gt;) cron&#xA;&#x9;webhooks (-right-&gt;) common&#xA;    cron (-right-&gt;) common&#xA;&#xA;&#x9;server &lt;--&gt; gcf&#xA;  &#xA;&#x9;gcf (--&gt;) server&#xA;&#x9;gcf &lt;-up-&gt; tasks&#xA;&#x9;gcf --&gt; secret_manager&#xA;    &#xA;&#x9;scheduler -up-&gt; run&#xA;&#x9;&#xA;    run --&gt; secret_manager&#xA;&#x9;run -up-&gt; gcf&#xA;}&#xA;</desc>
<rect x="0" y="0" width="740" height="20" style="fill:rgb(81, 155, 247);filter:url(#drop-shadow);" />
<text x="24" y="13" style="font-family:Roboto;font-size:8.5px;fill:rgb(255, 255, 255);" >Repo Automation Bots Infrastructure</text>
<rect x="0" y="400" width="740" height="10" style="fill:rgb(224, 224, 224);" />
<rect x="15" y="185" width="40" height="50" style="stroke-Width:0.06;filter:url(#drop-shadow);fill:rgb(255, 255, 255);stroke:rgb(0, 0, 0);" />
<image x="18" y="188" width="34" height="34" xlink:href="https://storage.googleapis.com/gcpdraw-icons/user/server.png" />
<text x="20" y="227" style="fill:rgb(0, 0, 0);dominant-baseline:central;font-family:Roboto;font-size:7.0px;" >GitHub</text>
<rect x="85" y="30" width="640" height="350" style="fill:rgb(246, 246, 246);" />
<image x="95" y="40" width="80" height="30" xlink:href="https://storage.googleapis.com/gcpdraw-icons/others/google_cloud_logo.png" />
<rect x="100" y="70" width="263" height="140" style="fill:rgb(227, 242, 253);" />
<text x="105" y="80" style="font-family:Roboto;font-size:7.5px;fill:rgb(158, 158, 158);dominant-baseline:central;" >GitHub Webhook Infrastructure</text>
<rect x="115" y="155" width="233" height="45" style="fill:rgb(255, 255, 255);stroke:rgb(0, 0, 0);stroke-Width:0.06;filter:url(#drop-shadow);" />
<image x="120" y="160" width="20" height="20" xlink:href="https://storage.googleapis.com/gcpdraw-icons/product/v2/gcf.png" />
<text x="147" y="162" style="font-family:Roboto;font-size:7.5px;fill:rgb(33, 33, 33);dominant-baseline:text-before-edge;" >bot1</text>
<text x="147" y="172" style="font-family:Roboto;font-size:7.0px;fill:rgb(117, 117, 117);dominant-baseline:text-before-edge;" >Cloud Functions</text>
<line x1="147" y1="183" x2="213" y2="183" style="stroke:rgb(224, 224, 224);stroke-Width:0.80;" />
<text x="147" y="186" style="font-family:Roboto;font-size:6.5px;fill:rgb(0, 0, 0);dominant-baseline:text-before-edge;" >The GitHub Bot. Handles both Webhooks and Cron events</text>
<rect x="115" y="90" width="218" height="45" style="fill:rgb(255, 255, 255);stroke:rgb(0, 0, 0);stroke-Width:0.06;filter:url(#drop-shadow);" />
<image x="120" y="95" width="20" height="20" xlink:href="https://storage.googleapis.com/gcpdraw-icons/product/v2/tasks.png" />
<text x="147" y="97" style="font-family:Roboto;font-size:7.5px;fill:rgb(33, 33, 33);dominant-baseline:text-before-edge;" >bot1-queue</text>
<text x="147" y="107" style="font-family:Roboto;font-size:7.0px;fill:rgb(117, 117, 117);dominant-baseline:text-before-edge;" >Cloud Tasks</text>
<line x1="147" y1="118" x2="213" y2="118" style="stroke:rgb(224, 224, 224);stroke-Width:0.80;" />
<text x="147" y="121" style="font-family:Roboto;font-size:6.5px;fill:rgb(0, 0, 0);dominant-baseline:text-before-edge;" >Queue per-bot. Allows for retries and inspection.</text>
<rect x="458" y="182" width="252" height="75" style="fill:rgb(227, 242, 253);" />
<text x="463" y="192" style="font-family:Roboto;font-size:7.5px;fill:rgb(158, 158, 158);dominant-baseline:central;" >Common Resources</text>
<rect x="473" y="202" width="222" height="45" style="stroke:rgb(0, 0, 0);stroke-Width:0.06;filter:url(#drop-shadow);fill:rgb(255, 255, 255);" />
<image x="478" y="207" width="20" height="20" xlink:href="https://storage.googleapis.com/gcpdraw-icons/product/v2/secret_manager.png" />
<text x="505" y="209" style="dominant-baseline:text-before-edge;font-family:Roboto;font-size:7.5px;fill:rgb(33, 33, 33);" >bot1</text>
<text x="505" y="219" style="dominant-baseline:text-before-edge;font-family:Roboto;font-size:7.0px;fill:rgb(117, 117, 117);" >Secret Manager</text>
<line x1="505" y1="230" x2="571" y2="230" style="stroke:rgb(224, 224, 224);stroke-Width:0.80;" />
<text x="505" y="233" style="font-family:Roboto;font-size:6.5px;fill:rgb(0, 0, 0);dominant-baseline:text-before-edge;" >Each bot has a secret with it&#39;s GitHub Private Key</text>
<rect x="100" y="230" width="328" height="140" style="fill:rgb(227, 242, 253);" />
<text x="105" y="240" style="font-family:Roboto;font-size:7.5px;fill:rgb(158, 158, 158);dominant-baseline:central;" >Cron-Based Infrastructure</text>
<rect x="115" y="250" width="298" height="45" style="stroke:rgb(0, 0, 0);stroke-Width:0.06;filter:url(#drop-shadow);fill:rgb(255, 255, 255);" />
<image x="120" y="255" width="20" height="20" xlink:href="https://storage.googleapis.com/gcpdraw-icons/product/v2/run.png" />
<text x="147" y="257" style="font-family:Roboto;font-size:7.5px;fill:rgb(33, 33, 33);dominant-baseline:text-before-edge;" >serverless_scheduler_proxy</text>
<text x="147" y="267" style="fill:rgb(117, 117, 117);dominant-baseline:text-before-edge;font-family:Roboto;font-size:7.0px;" >Cloud Run</text>
<line x1="147" y1="278" x2="213" y2="278" style="stroke:rgb(224, 224, 224);stroke-Width:0.80;" />
<text x="147" y="281" style="fill:rgb(0, 0, 0);dominant-baseline:text-before-edge;font-family:Roboto;font-size:6.5px;" >Invokes the given GCF signing the payload via secret in SecretManager.</text>
<rect x="115" y="315" width="244" height="45" style="fill:rgb(255, 255, 255);stroke:rgb(0, 0, 0);stroke-Width:0.06;filter:url(#drop-shadow);" />
<image x="120" y="320" width="20" height="20" xlink:href="https://storage.googleapis.com/gcpdraw-icons/product/v2/scheduler.png" />
<text x="147" y="322" style="font-family:Roboto;font-size:7.5px;fill:rgb(33, 33, 33);dominant-baseline:text-before-edge;" >bot1-cron</text>
<text x="147" y="332" style="font-family:Roboto;font-size:7.0px;fill:rgb(117, 117, 117);dominant-baseline:text-before-edge;" >Cloud Scheduler</text>
<line x1="147" y1="343" x2="213" y2="343" style="stroke:rgb(224, 224, 224);stroke-Width:0.80;" />
<text x="147" y="346" style="fill:rgb(0, 0, 0);dominant-baseline:text-before-edge;font-family:Roboto;font-size:6.5px;" >Optional for each bot. Invokes bots on a fixed schedule.</text>
<polyline points="62,210 85,210 85,177 108,177" style="stroke:rgb(58, 125, 240);marker-start:url(#path-arrow-start);marker-end:url(#path-arrow-end);fill:none;" />
<polyline points="231,148 231,145 224,145 224,142" style="marker-start:url(#path-arrow-start);marker-end:url(#path-arrow-end);fill:none;stroke:rgb(58, 125, 240);" />
<polyline points="348,177 410,177 410,225 466,225" style="marker-end:url(#path-arrow-end);fill:none;stroke:rgb(58, 125, 240);" />
<polyline points="237,315 237,305 264,305 264,302" style="marker-end:url(#path-arrow-end);fill:none;stroke:rgb(58, 125, 240);" />
<polyline points="413,272 443,272 443,225 466,225" style="marker-end:url(#path-arrow-end);fill:none;stroke:rgb(58, 125, 240);" />
<polyline points="264,250 264,225 231,225 231,207" style="marker-end:url(#path-arrow-end);fill:none;stroke:rgb(58, 125, 240);" />
</svg>
