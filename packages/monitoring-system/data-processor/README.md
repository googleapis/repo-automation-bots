# Data Processor: GitHub Automation Bots Monitoring System

An application to continuously consume new data generated by [repo-automation-bots](https://github.com/googleapis/repo-automation-bots) as well as other related sources, process it into a standardized format, and store it in Firestore

## Deployment

// TODO(asonawalla)

### Setting up permissions

If you want to use an existing Service Account to give Data Processor access to resources, skip to step 3.

1. Create a GCP Service Account for the Cloud Run instance used by Data Processor by going to GCP Console -> IAM & Admin -> Service Accounts
2. Copy the email address associated with the Service Account you just created
3. Edit the Cloud Run instance used by Data Processor and under Container -> Service Account select the account you just created in step 2 (or an existing account you want to use with Data Processor)

#### Give Data Processor Access to Cloud Tasks

Assign the Data Processor Service Account the IAM permission `cloudtasks.tasks.list` by going to the GCP Console where the task queues live -> IAM & Admin -> IAM

#### Give Data Processor Access to Firestore

Assign the Data Processor Service Account the role `Firebase Develop Admin` in the GCP Console of the Firebase project.

## Development

### Architectural Overview

// TODO(asonawalla)

### Firestore Schema

Refer to [firestore-schema.ts](packages/monitoring-system/data-processor/src/firestore-schema.ts) for a guide on the storage schema for Data Processor.